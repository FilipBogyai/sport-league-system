<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                template="/WEB-INF/templates/fullWidth.xhtml">
    <ui:param name="currentTitle" value="My matches"/>
    <ui:define name="content">
        <div class="header_01">My matches</div>

        <div class="section_w480">
            <div class="image_wrapper fl_img">
                <img src="#{request.contextPath}/resources/css/images/match.jpg"
                     alt="Match" />
            </div>
            <p class="em_text">On this page below you can find the list of
                matches you played, or you are supposed to play.
                You can also edit date, location, or score of your matches.</p>
        </div>

        <div class="header_03">List of my matches:</div>

        <c:choose>
            <c:when test="#{empty matches}">
                <em>No match was found.</em>
            </c:when>
            <c:otherwise>
                <table id="table">
                    <thead>
                    <tr>
                        <th style="width: 200px;">Time</th>
                        <th style="width: 180px">Player 1</th>
                        <th style="width: 100px">Score</th>
                        <th style="width: 180px">Player 2</th>
                        <th>Location</th>
                        <th></th>
                    </tr>
                    </thead>
                    <c:forEach items="#{matches}" var="matchesMap">
                        <tr class="matches-date-row">
                            <td>#{matchesMap.key}</td>
                            <td colspan="4"></td>
                        </tr>
                        <c:forEach items="#{matchesMap.value}" var="wrapper">
                            <tr>
                                <td>#{wrapper.date}</td>
                                <td class="right">#{wrapper.match.player1.firstName} #{wrapper.match.player1.lastName}</td>
                                <td>#{wrapper.match.scorePlayer1} - #{wrapper.match.scorePlayer2}</td>
                                <td class="left">#{wrapper.match.player2.firstName} #{wrapper.match.player2.lastName}</td>
                                <td>#{wrapper.match.location}</td>
                                <td>
                                    <c:if test="#{wrapper.canEdit}">
                                        <h:link outcome="/matches/edit">
                                            <f:param name="matchID" value="#{wrapper.match.id}"/>
                                            <img src="#{request.contextPath}/resources/css/images/edit_icon.png"
                                                 alt="Edit"/>
                                        </h:link>
                                    </c:if>
                                </td>
                            </tr>
                        </c:forEach>
                    </c:forEach>
                </table>
            </c:otherwise>
        </c:choose>

        <div class="margin_bottom_50"></div>
    </ui:define>
</ui:composition>